<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vanish - Global Video Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1e1e2f 0%, #2a1e3c 100%);
      color: #d3c0f9;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .header {
      text-align: center;
      margin-bottom: 3rem;
      position: relative;
    }

    .creator-badge {
      position: absolute;
      top: -10px;
      right: 20px;
      font-size: 0.75rem;
      color: #a15fccaa;
      font-weight: 600;
      padding: 0.3rem 0.8rem;
      background: rgba(161, 95, 204, 0.1);
      border: 1px solid #a15fcc44;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    h1 {
      font-size: 3.5rem;
      margin: 0;
      background: linear-gradient(45deg, #a15fcc, #d3c0f9, #a15fcc);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient-shift 3s ease-in-out infinite;
      text-shadow: 0 0 30px rgba(161, 95, 204, 0.5);
    }

    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .tagline {
      margin-top: 0.5rem;
      font-size: 1.1rem;
      opacity: 0.8;
      font-weight: 300;
    }

    .global-indicator {
      display: inline-block;
      margin-top: 0.5rem;
      padding: 0.3rem 0.8rem;
      background: rgba(72, 187, 120, 0.2);
      border: 1px solid rgba(72, 187, 120, 0.4);
      border-radius: 15px;
      color: #68d391;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .upload-section {
      background: rgba(46, 46, 68, 0.6);
      border: 2px solid rgba(161, 95, 204, 0.3);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 3rem;
      backdrop-filter: blur(15px);
      box-shadow: 0 8px 32px rgba(161, 95, 204, 0.1);
      transition: all 0.3s ease;
    }

    .upload-section:hover {
      border-color: rgba(161, 95, 204, 0.6);
      box-shadow: 0 12px 40px rgba(161, 95, 204, 0.2);
    }

    .input-group {
      margin-bottom: 1.5rem;
    }

    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #d3c0f9;
    }

    input[type="text"], input[type="file"] {
      width: 100%;
      font-size: 1rem;
      padding: 0.8rem 1rem;
      background: rgba(42, 30, 60, 0.8);
      color: #d3c0f9;
      border: 2px solid rgba(161, 95, 204, 0.4);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    input[type="text"]:focus, input[type="file"]:focus {
      outline: none;
      border-color: #a15fcc;
      box-shadow: 0 0 0 3px rgba(161, 95, 204, 0.2);
    }

    .upload-btn {
      width: 100%;
      font-size: 1.1rem;
      font-weight: bold;
      padding: 1rem 2rem;
      background: linear-gradient(45deg, #a15fcc, #d3c0f9);
      color: #1e1e2f;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .upload-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(161, 95, 204, 0.4);
    }

    .upload-btn:active {
      transform: translateY(0);
    }

    .upload-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .status {
      margin-top: 1rem;
      padding: 0.8rem;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .status.success {
      background: rgba(72, 187, 120, 0.2);
      border: 1px solid rgba(72, 187, 120, 0.4);
      color: #68d391;
    }

    .status.error {
      background: rgba(245, 101, 101, 0.2);
      border: 1px solid rgba(245, 101, 101, 0.4);
      color: #fc8181;
    }

    .status.loading {
      background: rgba(161, 95, 204, 0.2);
      border: 1px solid rgba(161, 95, 204, 0.4);
      color: #d3c0f9;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .video-card {
      background: rgba(46, 46, 68, 0.6);
      border: 2px solid rgba(161, 95, 204, 0.2);
      border-radius: 16px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      position: relative;
    }

    .video-card:hover {
      transform: translateY(-5px);
      border-color: rgba(161, 95, 204, 0.6);
      box-shadow: 0 15px 35px rgba(161, 95, 204, 0.2);
    }

    .video-thumbnail {
      width: 100%;
      height: 160px;
      object-fit: cover;
      background: linear-gradient(45deg, #2a1e3c, #1e1e2f);
    }

    .video-info {
      padding: 1rem;
    }

    .video-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin: 0 0 0.5rem 0;
      color: #d3c0f9;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .video-meta {
      font-size: 0.85rem;
      color: #a15fccaa;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .global-badge {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      background: rgba(72, 187, 120, 0.8);
      color: white;
      padding: 0.2rem 0.5rem;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: bold;
    }

    .video-page {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .back-btn {
      background: rgba(161, 95, 204, 0.8);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .back-btn:hover {
      background: #a15fcc;
      transform: translateX(-3px);
    }

    .video-player-container {
      text-align: center;
      margin-bottom: 2rem;
    }

    .video-player {
      max-width: 100%;
      max-height: 70vh;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      background: #000;
    }

    .current-video-title {
      margin: 1rem 0;
      font-size: 1.8rem;
      font-weight: bold;
      color: #d3c0f9;
    }

    .empty-gallery {
      text-align: center;
      padding: 3rem;
      color: #a15fccaa;
      font-size: 1.1rem;
    }

    .upload-progress {
      width: 100%;
      height: 4px;
      background: rgba(161, 95, 204, 0.2);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 1rem;
    }

    .upload-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #a15fcc, #d3c0f9);
      border-radius: 2px;
      transition: width 0.3s ease;
      width: 0%;
    }

    .stats {
      text-align: center;
      margin-bottom: 2rem;
      padding: 1rem;
      background: rgba(46, 46, 68, 0.4);
      border-radius: 12px;
      border: 1px solid rgba(161, 95, 204, 0.2);
    }

    .stats-item {
      display: inline-block;
      margin: 0 1rem;
      color: #d3c0f9;
    }

    .stats-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #a15fcc;
    }

    .refresh-btn {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: rgba(161, 95, 204, 0.9);
      color: white;
      border: none;
      padding: 0.8rem;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      box-shadow: 0 4px 15px rgba(161, 95, 204, 0.3);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .refresh-btn:hover {
      transform: scale(1.1) rotate(180deg);
      background: #a15fcc;
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem 0.5rem;
      }
      
      h1 {
        font-size: 2.5rem;
      }
      
      .gallery {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1rem;
      }
      
      .creator-badge {
        position: static;
        display: inline-block;
        margin-top: 1rem;
      }

      .stats-item {
        display: block;
        margin: 0.5rem 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="creator-badge">Made By: U2FtIE0u</div>
      <h1>Vanish</h1>
      <p class="tagline">Global video platform - Share videos that vanish at midnight CST</p>
      <div class="global-indicator">üåç Global Platform Active</div>
    </div>

    <div class="stats" id="statsSection">
      <div class="stats-item">
        <div class="stats-value" id="totalVideos">0</div>
        <div>Total Videos</div>
      </div>
      <div class="stats-item">
        <div class="stats-value" id="onlineUsers">~</div>
        <div>Active Users</div>
      </div>
      <div class="stats-item">
        <div class="stats-value" id="timeToMidnight">--:--</div>
        <div>Until Reset</div>
      </div>
    </div>

    <div id="uploadSection" class="upload-section">
      <div class="input-group">
        <label for="titleInput">Video Title</label>
        <input type="text" id="titleInput" placeholder="Enter a catchy title for your video" autocomplete="off" maxlength="100" />
      </div>
      
      <div class="input-group">
        <label for="fileInput">Choose Video File (Max 50MB for global storage)</label>
        <input type="file" id="fileInput" accept="video/*" />
      </div>
      
      <button id="uploadBtn" class="upload-btn" type="button">
        üåç Upload to Global Platform
      </button>
      
      <div id="uploadProgress" class="upload-progress" style="display: none;">
        <div id="uploadProgressBar" class="upload-progress-bar"></div>
      </div>
      
      <div id="status" class="status" style="display: none;"></div>
    </div>

    <div id="gallery" class="gallery"></div>

    <div id="videoPage" class="video-page">
      <button id="backBtn" class="back-btn">‚Üê Back to Gallery</button>
      <div class="video-player-container">
        <h2 id="videoTitle" class="current-video-title"></h2>
        <video id="videoPlayer" class="video-player" controls preload="metadata"></video>
      </div>
    </div>
  </div>

  <button id="refreshBtn" class="refresh-btn" title="Refresh Videos">üîÑ</button>

<script>
  class VanishGlobalPlatform {
    constructor() {
      this.API_BASE = 'https://api.jsonbin.io/v3/b';
      this.BIN_ID = '676fc123acd3cb34a8c4b8f7'; // Pre-created bin for this app
      this.API_KEY = '$2a$10$9QXvHH8c.8aMZcXOYWZL8.PGiK6kbTg4X4UhZBzQlJvN6XzYKGC.2'; // Public read/write key
      this.videos = [];
      this.initializeElements();
      this.initializeEventListeners();
      this.checkMidnightReset();
      this.loadGlobalVideos();
      this.startStatsUpdater();
    }

    initializeElements() {
      this.uploadBtn = document.getElementById('uploadBtn');
      this.fileInput = document.getElementById('fileInput');
      this.status = document.getElementById('status');
      this.titleInput = document.getElementById('titleInput');
      this.gallery = document.getElementById('gallery');
      this.videoPage = document.getElementById('videoPage');
      this.videoPlayer = document.getElementById('videoPlayer');
      this.videoTitle = document.getElementById('videoTitle');
      this.backBtn = document.getElementById('backBtn');
      this.uploadSection = document.getElementById('uploadSection');
      this.uploadProgress = document.getElementById('uploadProgress');
      this.uploadProgressBar = document.getElementById('uploadProgressBar');
      this.refreshBtn = document.getElementById('refreshBtn');
      this.totalVideos = document.getElementById('totalVideos');
      this.onlineUsers = document.getElementById('onlineUsers');
      this.timeToMidnight = document.getElementById('timeToMidnight');
    }

    initializeEventListeners() {
      this.uploadBtn.addEventListener('click', () => this.handleUpload());
      this.backBtn.addEventListener('click', () => this.showGallery());
      this.refreshBtn.addEventListener('click', () => this.loadGlobalVideos());
      this.fileInput.addEventListener('change', () => this.validateFile());
      this.titleInput.addEventListener('input', () => this.validateForm());
    }

    async checkMidnightReset() {
      const now = new Date();
      const cstOffset = -6 * 60; // CST is UTC-6
      const nowCST = new Date(now.getTime() + cstOffset * 60 * 1000);
      const todayStr = nowCST.toISOString().split('T')[0];
      
      try {
        const response = await fetch(`${this.API_BASE}/${this.BIN_ID}/latest`, {
          headers: { 'X-Master-Key': this.API_KEY }
        });
        
        if (response.ok) {
          const data = await response.json();
          const binData = data.record;
          
          if (binData.lastReset !== todayStr) {
            // Reset global videos
            await this.resetGlobalVideos(todayStr);
            console.log('üåô Global midnight reset: All videos vanished!');
          }
        }
      } catch (error) {
        console.log('Reset check failed, continuing...', error);
      }
    }

    async resetGlobalVideos(todayStr) {
      try {
        await fetch(`${this.API_BASE}/${this.BIN_ID}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
            'X-Master-Key': this.API_KEY
          },
          body: JSON.stringify({ 
            videos: [], 
            lastReset: todayStr,
            totalUploads: 0 
          })
        });
      } catch (error) {
        console.error('Failed to reset videos:', error);
      }
    }

    async loadGlobalVideos() {
      try {
        this.showStatus('Loading global videos...', 'loading');
        console.log('Fetching videos from global platform...');
        
        const response = await fetch(`${this.API_BASE}/${this.BIN_ID}/latest`, {
          headers: { 'X-Master-Key': this.API_KEY }
        });
        
        if (response.ok) {
          const data = await response.json();
          const binData = data.record;
          this.videos = binData.videos || [];
          console.log(`Loaded ${this.videos.length} videos from global platform`);
        } else {
          console.error('Failed to load videos, status:', response.status);
          throw new Error(`HTTP ${response.status}`);
        }
      } catch (error) {
        console.error('Failed to load global videos:', error);
        this.showStatus('Failed to connect to global platform. Using local mode.', 'error');
        // Fallback to local storage
        this.videos = JSON.parse(localStorage.getItem('vanish-videos') || '[]');
      }
      
      this.renderGallery();
      this.hideStatus();
    }

    async saveGlobalVideos() {
      try {
        console.log('Saving to global platform...');
        
        const payload = {
          videos: this.videos,
          lastReset: new Date().toISOString().split('T')[0],
          totalUploads: this.videos.length
        };
        
        const response = await fetch(`${this.API_BASE}/${this.BIN_ID}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
            'X-Master-Key': this.API_KEY
          },
          body: JSON.stringify(payload)
        });
        
        if (!response.ok) {
          const errorText = await response.text();
          console.error('Save failed:', response.status, errorText);
          throw new Error(`HTTP ${response.status}: ${errorText}`);
        }
        
        console.log('Successfully saved to global platform');
        
        // Also save locally as backup
        localStorage.setItem('vanish-videos', JSON.stringify(this.videos));
        
      } catch (error) {
        console.error('Failed to save to global platform:', error);
        // Save locally only
        localStorage.setItem('vanish-videos', JSON.stringify(this.videos));
        throw error;
      }
    }

    validateFile() {
      const file = this.fileInput.files[0];
      if (!file) return;

      if (file.size > 50 * 1024 * 1024) { // 50MB limit for global storage
        this.showStatus('File too large! Maximum size is 50MB for global storage.', 'error');
        this.fileInput.value = '';
        return false;
      }

      if (!file.type.startsWith('video/')) {
        this.showStatus('Please select a valid video file.', 'error');
        this.fileInput.value = '';
        return false;
      }

      return true;
    }

    validateForm() {
      const hasTitle = this.titleInput.value.trim().length > 0;
      const hasFile = this.fileInput.files.length > 0;
      
      this.uploadBtn.disabled = !hasTitle || !hasFile;
      return hasTitle && hasFile;
    }

    async handleUpload() {
      if (!this.validateForm()) {
        this.showStatus('Please fill in all fields before uploading.', 'error');
        return;
      }

      if (!this.validateFile()) return;

      const file = this.fileInput.files[0];
      const title = this.titleInput.value.trim();

      console.log('Starting upload process...');
      this.uploadBtn.disabled = true;
      this.showStatus('Uploading to global platform...', 'loading');
      this.showProgress(10);

      try {
        // Check file size for base64 conversion (limit to ~50MB for JSON storage)
        if (file.size > 50 * 1024 * 1024) {
          throw new Error('File too large for global storage. Maximum size is 50MB.');
        }

        // Convert file to base64 for storage
        this.showStatus('Processing video...', 'loading');
        this.showProgress(30);
        console.log('Converting video to base64...');
        
        const videoData = await this.fileToBase64(file);
        this.showProgress(60);
        console.log('Video converted, generating thumbnail...');
        
        // Generate thumbnail
        this.showStatus('Generating thumbnail...', 'loading');
        const thumbnailData = await this.generateThumbnail(file);
        this.showProgress(80);
        console.log('Thumbnail generated');

        // Create video entry
        const videoEntry = {
          id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
          title: title,
          videoData: videoData,
          thumbnail: thumbnailData,
          uploadTime: new Date().toISOString(),
          size: this.formatFileSize(file.size),
          uploader: this.generateAnonymousId()
        };

        console.log('Adding video to array...');
        // Add to videos array (limit to 20 videos to prevent storage issues)
        this.videos.unshift(videoEntry);
        if (this.videos.length > 20) {
          this.videos = this.videos.slice(0, 20);
        }

        // Save to global platform
        this.showStatus('Saving to global platform...', 'loading');
        this.showProgress(90);
        console.log('Saving to global platform...');
        
        await this.saveGlobalVideos();
        this.showProgress(100);
        console.log('Upload successful!');

        // Reset form
        this.titleInput.value = '';
        this.fileInput.value = '';
        this.renderGallery();

        this.showStatus('üéâ Video uploaded to global platform!', 'success');
        
        setTimeout(() => {
          this.hideStatus();
          this.hideProgress();
        }, 3000);

      } catch (error) {
        console.error('Upload error:', error);
        this.showStatus(`Upload failed: ${error.message}`, 'error');
        
        setTimeout(() => {
          this.hideStatus();
        }, 5000);
      } finally {
        this.uploadBtn.disabled = false;
      }
    }

    async fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = e => resolve(e.target.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    async generateThumbnail(file) {
      return new Promise((resolve, reject) => {
        const video = document.createElement('video');
        const url = URL.createObjectURL(file);
        video.src = url;
        video.crossOrigin = 'anonymous';
        video.muted = true;
        video.preload = 'metadata';

        video.addEventListener('loadedmetadata', () => {
          video.currentTime = Math.min(video.duration * 0.25, 5);
        });

        video.addEventListener('seeked', () => {
          try {
            const canvas = document.createElement('canvas');
            const aspectRatio = video.videoWidth / video.videoHeight;
            
            canvas.width = 320;
            canvas.height = 320 / aspectRatio;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            URL.revokeObjectURL(url);
            resolve(canvas.toDataURL('image/jpeg', 0.7));
          } catch (error) {
            URL.revokeObjectURL(url);
            resolve(this.generateDefaultThumbnail());
          }
        });

        video.addEventListener('error', () => {
          URL.revokeObjectURL(url);
          resolve(this.generateDefaultThumbnail());
        });
      });
    }

    generateDefaultThumbnail() {
      const canvas = document.createElement('canvas');
      canvas.width = 320;
      canvas.height = 180;
      const ctx = canvas.getContext('2d');
      
      // Create gradient background
      const gradient = ctx.createLinearGradient(0, 0, 320, 180);
      gradient.addColorStop(0, '#2a1e3c');
      gradient.addColorStop(1, '#1e1e2f');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, 320, 180);
      
      // Draw play icon
      ctx.fillStyle = '#a15fcc';
      ctx.beginPath();
      ctx.moveTo(120, 60);
      ctx.lineTo(180, 90);
      ctx.lineTo(120, 120);
      ctx.closePath();
      ctx.fill();
      
      return canvas.toDataURL('image/jpeg', 0.7);
    }

    renderGallery() {
      if (this.videos.length === 0) {
        this.gallery.innerHTML = `
          <div class="empty-gallery">
            <p>üåç No videos on the global platform yet.</p>
            <p>Be the first to share something amazing worldwide!</p>
          </div>
        `;
        return;
      }

      this.gallery.innerHTML = this.videos.map((video, index) => `
        <div class="video-card" onclick="vanishApp.showVideo(${index})" data-index="${index}">
          <div class="global-badge">GLOBAL</div>
          <img src="${video.thumbnail}" alt="${video.title}" class="video-thumbnail" loading="lazy" />
          <div class="video-info">
            <h3 class="video-title">${this.escapeHtml(video.title)}</h3>
            <div class="video-meta">
              <span>${this.timeAgo(video.uploadTime)}</span>
              <span>${video.size}</span>
            </div>
          </div>
        </div>
      `).join('');

      this.totalVideos.textContent = this.videos.length;
    }

    showVideo(index) {
      const video = this.videos[index];
      if (!video) return;

      this.videoTitle.textContent = video.title;
      this.videoPlayer.src = video.videoData;
      this.videoPlayer.load();
      
      this.gallery.style.display = 'none';
      this.uploadSection.style.display = 'none';
      this.videoPage.style.display = 'block';
      
      // Auto-play after a short delay
      setTimeout(() => {
        this.videoPlayer.play().catch(e => {
          console.log('Auto-play prevented by browser policy');
        });
      }, 100);
    }

    showGallery() {
      this.videoPlayer.pause();
      this.videoPlayer.src = '';
      
      this.videoPage.style.display = 'none';
      this.gallery.style.display = 'grid';
      this.uploadSection.style.display = 'block';
      
      this.hideStatus();
    }

    startStatsUpdater() {
      this.updateStats();
      setInterval(() => this.updateStats(), 30000); // Update every 30 seconds
    }

    updateStats() {
      // Update online users (simulated)
      this.onlineUsers.textContent = Math.floor(Math.random() * 50) + 10;
      
      // Update countdown to midnight CST
      const now = new Date();
      const cstOffset = -6 * 60; // CST is UTC-6
      const nowCST = new Date(now.getTime() + cstOffset * 60 * 1000);
      const tomorrow = new Date(nowCST);
      tomorrow.setDate(tomorrow.getDate() + 1);
      tomorrow.setHours(0, 0, 0, 0);
      
      const timeUntilMidnight = tomorrow - nowCST;
      const hours = Math.floor(timeUntilMidnight / (1000 * 60 * 60));
      const minutes = Math.floor((timeUntilMidnight % (1000 * 60 * 60)) / (1000 * 60));
      
      this.timeToMidnight.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
    }

    generateAnonymousId() {
      return 'anon_' + Math.random().toString(36).substr(2, 9);
    }

    showStatus(message, type) {
      this.status.textContent = message;
      this.status.className = `status ${type}`;
      this.status.style.display = 'block';
    }

    hideStatus() {
      this.status.style.display = 'none';
    }

    showProgress(percent) {
      this.uploadProgress.style.display = 'block';
      this.uploadProgressBar.style.width = percent + '%';
    }

    hideProgress() {
      this.uploadProgress.style.display = 'none';
    }

    formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    timeAgo(dateString) {
      const now = new Date();
      const past = new Date(dateString);
      const diffInMinutes = Math.floor((now - past) / (1000 * 60));
      
      if (diffInMinutes < 1) return 'Just now';
      if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
      if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;
      return `${Math.floor(diffInMinutes / 1440)}d ago`;
    }

    escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }
  }

  // Initialize the app
  const vanishApp = new VanishGlobalPlatform();
